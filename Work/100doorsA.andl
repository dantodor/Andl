// The 100 doors problem -- http://rosettacode.org/wiki/100_doors
#noisy 1
// basic data set
ndoors := 100
doors := seq(ndoors) .set{ N := N+1, open := false }

// function to apply flip level times
pass:do{}(level:0) => do {
	if(level=0, do{}, 
		do { update doors .where(mod(N,level) = 0) .set{ *open := not open } 
			pass(level-1)
		})
}

// compute and show output
pass(ndoors)
doors .where(open) .order(N) .set{ N }
